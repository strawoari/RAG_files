2025-06-16 09:56:48,425 - lightrag - INFO - Created new empty graph
2025-06-16 09:57:24,972 - lightrag - INFO - Created new empty graph
2025-06-16 09:57:25,001 - uvicorn.error - INFO - Started server process [63867]
2025-06-16 09:57:25,002 - uvicorn.error - INFO - Waiting for application startup.
2025-06-16 09:57:25,002 - lightrag - INFO - Process 63867 KV load full_docs with 0 records
2025-06-16 09:57:25,002 - lightrag - INFO - Process 63867 KV load text_chunks with 0 records
2025-06-16 09:57:25,002 - lightrag - INFO - Process 63867 KV load llm_response_cache with 0 records
2025-06-16 09:57:25,002 - lightrag - INFO - Process 63867 doc status load doc_status with 0 records
2025-06-16 09:57:25,002 - uvicorn.error - INFO - Application startup complete.
2025-06-16 09:57:25,002 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:9621 (Press CTRL+C to quit)
2025-06-16 09:58:15,317 - uvicorn.access - INFO - 127.0.0.1:55451 - "POST /query HTTP/1.1" 500
2025-06-16 09:59:15,854 - uvicorn.access - INFO - 127.0.0.1:55479 - "POST /query HTTP/1.1" 500
2025-06-16 10:00:04,542 - uvicorn.access - INFO - 127.0.0.1:55499 - "GET / HTTP/1.1" 307
2025-06-16 10:00:04,550 - uvicorn.access - INFO - 127.0.0.1:55501 - "GET /webui HTTP/1.1" 307
2025-06-16 10:00:04,573 - uvicorn.access - INFO - 127.0.0.1:55503 - "GET /webui/assets/index-CWr98JSw.js HTTP/1.1" 200
2025-06-16 10:00:04,575 - uvicorn.access - INFO - 127.0.0.1:55507 - "GET /webui/assets/feature-graph-B5dlndAs.js HTTP/1.1" 200
2025-06-16 10:00:04,584 - uvicorn.access - INFO - 127.0.0.1:55512 - "GET /webui/assets/index-DsHQCgEh.css HTTP/1.1" 200
2025-06-16 10:00:04,586 - uvicorn.access - INFO - 127.0.0.1:55511 - "GET /webui/assets/feature-retrieval-ClAhVsls.js HTTP/1.1" 200
2025-06-16 10:00:04,587 - uvicorn.access - INFO - 127.0.0.1:55509 - "GET /webui/assets/mermaid-vendor-uLomm4dI.js HTTP/1.1" 200
2025-06-16 10:00:04,588 - uvicorn.access - INFO - 127.0.0.1:55510 - "GET /webui/assets/markdown-vendor-BcK8zFK7.js HTTP/1.1" 200
2025-06-16 10:00:04,591 - uvicorn.access - INFO - 127.0.0.1:55513 - "GET /webui/assets/feature-graph-BipNuM18.css HTTP/1.1" 200
2025-06-16 10:00:04,591 - uvicorn.access - INFO - 127.0.0.1:55514 - "GET /webui/assets/feature-documents-C4vtaK7t.js HTTP/1.1" 200
2025-06-16 10:00:04,599 - uvicorn.access - INFO - 127.0.0.1:55515 - "GET /webui/assets/react-vendor-DEwriMA6.js HTTP/1.1" 200
2025-06-16 10:00:04,605 - uvicorn.access - INFO - 127.0.0.1:55517 - "GET /webui/assets/utils-vendor-BysuhMZA.js HTTP/1.1" 200
2025-06-16 10:00:04,606 - uvicorn.access - INFO - 127.0.0.1:55518 - "GET /webui/assets/graph-vendor-B-X5JegA.js HTTP/1.1" 200
2025-06-16 10:00:04,606 - uvicorn.access - INFO - 127.0.0.1:55516 - "GET /webui/assets/ui-vendor-CeCm8EER.js HTTP/1.1" 200
2025-06-16 10:00:04,740 - uvicorn.access - INFO - 127.0.0.1:55519 - "GET /auth-status HTTP/1.1" 500
2025-06-16 10:00:04,740 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/lightrag_server.py", line 371, in get_auth_status
    guest_token = auth_handler.create_token(
        username="guest", role="guest", metadata={"auth_mode": "disabled"}
    )
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/auth.py", line 71, in create_token
    return jwt.encode(payload.dict(), self.secret, algorithm=self.algorithm)
           ^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'encode'
2025-06-16 10:00:04,746 - uvicorn.access - INFO - 127.0.0.1:55520 - "GET /webui/logo.png HTTP/1.1" 200
2025-06-16 10:00:04,861 - uvicorn.access - INFO - 127.0.0.1:55522 - "GET /docs HTTP/1.1" 200
2025-06-16 10:00:04,872 - uvicorn.access - INFO - 127.0.0.1:55524 - "GET /graph/label/list HTTP/1.1" 500
2025-06-16 10:00:04,872 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/auth.py", line 87, in validate_token
    payload = jwt.decode(token, self.secret, algorithms=[self.algorithm])
              ^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'decode'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/utils_api.py", line 103, in combined_dependency
    token_info = auth_handler.validate_token(token)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/auth.py", line 103, in validate_token
    except jwt.PyJWTError:
           ^^^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'PyJWTError'
2025-06-16 10:00:04,877 - uvicorn.access - INFO - 127.0.0.1:55523 - "GET /documents HTTP/1.1" 500
2025-06-16 10:00:04,878 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/auth.py", line 87, in validate_token
    payload = jwt.decode(token, self.secret, algorithms=[self.algorithm])
              ^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'decode'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/utils_api.py", line 103, in combined_dependency
    token_info = auth_handler.validate_token(token)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/auth.py", line 103, in validate_token
    except jwt.PyJWTError:
           ^^^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'PyJWTError'
2025-06-16 10:00:04,898 - uvicorn.access - INFO - 127.0.0.1:55525 - "GET /graphs?label=*&max_depth=3&max_nodes=1000 HTTP/1.1" 500
2025-06-16 10:00:04,898 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/auth.py", line 87, in validate_token
    payload = jwt.decode(token, self.secret, algorithms=[self.algorithm])
              ^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'decode'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/utils_api.py", line 103, in combined_dependency
    token_info = auth_handler.validate_token(token)
  File "/Users/amychan/rag_files/.venv/lib/python3.13/site-packages/lightrag/api/auth.py", line 103, in validate_token
    except jwt.PyJWTError:
           ^^^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'PyJWTError'
2025-06-16 10:00:06,610 - uvicorn.access - INFO - 127.0.0.1:55532 - "GET /openapi.json HTTP/1.1" 200
2025-06-16 10:00:34,525 - uvicorn.access - INFO - 127.0.0.1:55552 - "GET /docs HTTP/1.1" 200
2025-06-16 10:00:34,568 - uvicorn.access - INFO - 127.0.0.1:55553 - "GET /openapi.json HTTP/1.1" 200
2025-06-16 10:02:31,874 - uvicorn.error - INFO - Shutting down
2025-06-16 10:02:31,976 - uvicorn.error - INFO - Waiting for application shutdown.
2025-06-16 10:02:31,977 - uvicorn.error - INFO - Application shutdown complete.
2025-06-16 10:02:31,977 - uvicorn.error - INFO - Finished server process [63867]
2025-06-16 10:03:05,429 - lightrag - INFO - Created new empty graph
2025-06-16 10:03:05,458 - uvicorn.error - INFO - Started server process [64429]
2025-06-16 10:03:05,458 - uvicorn.error - INFO - Waiting for application startup.
2025-06-16 10:03:05,458 - lightrag - INFO - Process 64429 KV load full_docs with 0 records
2025-06-16 10:03:05,458 - lightrag - INFO - Process 64429 KV load text_chunks with 0 records
2025-06-16 10:03:05,458 - lightrag - INFO - Process 64429 KV load llm_response_cache with 0 records
2025-06-16 10:03:05,458 - lightrag - INFO - Process 64429 doc status load doc_status with 0 records
2025-06-16 10:03:05,458 - uvicorn.error - INFO - Application startup complete.
2025-06-16 10:03:05,459 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:9621 (Press CTRL+C to quit)
2025-06-16 10:06:46,099 - uvicorn.error - INFO - Shutting down
2025-06-16 10:06:46,200 - uvicorn.error - INFO - Waiting for application shutdown.
2025-06-16 10:06:46,201 - uvicorn.error - INFO - Application shutdown complete.
2025-06-16 10:06:46,201 - uvicorn.error - INFO - Finished server process [64429]
2025-06-16 10:21:48,953 - lightrag - INFO - Created new empty graph
2025-06-16 10:21:49,068 - uvicorn.error - INFO - Started server process [66327]
2025-06-16 10:21:49,068 - uvicorn.error - INFO - Waiting for application startup.
2025-06-16 10:21:49,069 - lightrag - INFO - Process 66327 KV load full_docs with 0 records
2025-06-16 10:21:49,069 - lightrag - INFO - Process 66327 KV load text_chunks with 0 records
2025-06-16 10:21:49,069 - lightrag - INFO - Process 66327 KV load llm_response_cache with 0 records
2025-06-16 10:21:49,069 - lightrag - INFO - Process 66327 doc status load doc_status with 0 records
2025-06-16 10:21:49,069 - uvicorn.error - INFO - Application startup complete.
2025-06-16 10:21:49,069 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:9621 (Press CTRL+C to quit)
2025-06-16 10:22:06,993 - uvicorn.access - INFO - 127.0.0.1:56928 - "GET / HTTP/1.1" 307
2025-06-16 10:22:06,998 - uvicorn.access - INFO - 127.0.0.1:56929 - "GET /webui HTTP/1.1" 307
2025-06-16 10:22:07,154 - uvicorn.access - INFO - 127.0.0.1:56931 - "GET /auth-status HTTP/1.1" 200
2025-06-16 10:22:07,289 - uvicorn.access - INFO - 127.0.0.1:56932 - "GET /docs HTTP/1.1" 200
2025-06-16 10:22:07,384 - uvicorn.access - INFO - 127.0.0.1:56933 - "GET /openapi.json HTTP/1.1" 200
2025-06-16 10:22:19,950 - lightrag - INFO - limit_async: 16 new workers initialized
2025-06-16 10:22:21,586 - lightrag - ERROR - limit_async: Error in decorated function: Error code: 404 - {'error': {'code': 'DeploymentNotFound', 'message': 'The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.'}}
2025-06-16 10:22:21,587 - lightrag - ERROR - Error in _get_vector_context: Error code: 404 - {'error': {'code': 'DeploymentNotFound', 'message': 'The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.'}}
2025-06-16 10:22:21,587 - uvicorn.access - INFO - 127.0.0.1:56945 - "POST /query HTTP/1.1" 200
2025-06-16 10:22:31,865 - uvicorn.error - INFO - Shutting down
2025-06-16 10:22:31,967 - uvicorn.error - INFO - Waiting for application shutdown.
2025-06-16 10:22:31,969 - uvicorn.error - INFO - Application shutdown complete.
2025-06-16 10:22:31,970 - uvicorn.error - INFO - Finished server process [66327]
2025-06-16 12:47:59,294 - lightrag - INFO - Created new empty graph
2025-06-16 12:47:59,337 - uvicorn.error - INFO - Started server process [77117]
2025-06-16 12:47:59,337 - uvicorn.error - INFO - Waiting for application startup.
2025-06-16 12:47:59,338 - lightrag - INFO - Process 77117 KV load full_docs with 0 records
2025-06-16 12:47:59,338 - lightrag - INFO - Process 77117 KV load text_chunks with 0 records
2025-06-16 12:47:59,338 - lightrag - INFO - Process 77117 KV load llm_response_cache with 0 records
2025-06-16 12:47:59,338 - lightrag - INFO - Process 77117 doc status load doc_status with 0 records
2025-06-16 12:47:59,338 - uvicorn.error - INFO - Application startup complete.
2025-06-16 12:47:59,338 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:9621 (Press CTRL+C to quit)
2025-06-16 12:48:03,487 - uvicorn.error - INFO - Shutting down
2025-06-16 12:48:03,589 - uvicorn.error - INFO - Waiting for application shutdown.
2025-06-16 12:48:03,590 - uvicorn.error - INFO - Application shutdown complete.
2025-06-16 12:48:03,590 - uvicorn.error - INFO - Finished server process [77117]
2025-06-16 12:53:40,872 - lightrag - INFO - Created new empty graph
2025-06-16 12:53:40,916 - uvicorn.error - INFO - Started server process [77824]
2025-06-16 12:53:40,916 - uvicorn.error - INFO - Waiting for application startup.
2025-06-16 12:53:40,916 - lightrag - INFO - Process 77824 KV load full_docs with 0 records
2025-06-16 12:53:40,916 - lightrag - INFO - Process 77824 KV load text_chunks with 0 records
2025-06-16 12:53:40,916 - lightrag - INFO - Process 77824 KV load llm_response_cache with 0 records
2025-06-16 12:53:40,917 - lightrag - INFO - Process 77824 doc status load doc_status with 0 records
2025-06-16 12:53:40,917 - uvicorn.error - INFO - Application startup complete.
2025-06-16 12:53:40,917 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:9621 (Press CTRL+C to quit)
2025-06-16 12:58:06,190 - uvicorn.access - INFO - 127.0.0.1:49158 - "GET / HTTP/1.1" 307
2025-06-16 12:58:06,195 - uvicorn.access - INFO - 127.0.0.1:49159 - "GET /webui HTTP/1.1" 307
2025-06-16 12:58:06,371 - uvicorn.access - INFO - 127.0.0.1:49161 - "GET /auth-status HTTP/1.1" 200
2025-06-16 12:58:06,495 - uvicorn.access - INFO - 127.0.0.1:49162 - "GET /docs HTTP/1.1" 200
2025-06-16 12:58:06,584 - uvicorn.access - INFO - 127.0.0.1:49163 - "GET /openapi.json HTTP/1.1" 200
2025-06-16 12:59:32,141 - uvicorn.access - INFO - 127.0.0.1:49251 - "POST /documents/file HTTP/1.1" 422
2025-06-16 13:00:05,840 - uvicorn.access - INFO - 127.0.0.1:49288 - "POST /documents/upload HTTP/1.1" 200
2025-06-16 13:00:05,843 - lightrag - INFO - Stored 1 new unique documents
2025-06-16 13:00:05,844 - lightrag - INFO - Successfully fetched and enqueued file: doc_0_c9a01a3705ddd76599eb211929f8dd84.json
2025-06-16 13:00:05,844 - lightrag - INFO - Processing 1 document(s)
2025-06-16 13:00:05,845 - lightrag - INFO - Extracting stage 1/1: doc_0_c9a01a3705ddd76599eb211929f8dd84.json
2025-06-16 13:00:05,845 - lightrag - INFO - Processing d-id: doc-9b5a5c8aba699a1eeb5b5d579da4dd8f
2025-06-16 13:00:05,856 - lightrag - INFO - limit_async: 16 new workers initialized
2025-06-16 13:00:05,856 - lightrag - INFO - limit_async: 5 new workers initialized
2025-06-16 13:00:07,591 - lightrag - ERROR - limit_async: Error in decorated function: Error code: 404 - {'error': {'code': 'DeploymentNotFound', 'message': 'The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.'}}
2025-06-16 13:00:07,606 - lightrag - ERROR - Traceback (most recent call last):
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/lightrag.py", line 1003, in process_document
    await asyncio.gather(*tasks)
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 109, in upsert
    embeddings_list = await asyncio.gather(*embedding_tasks)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/utils.py", line 585, in wait_func
    return await future
           ^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/utils.py", line 369, in worker
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/utils.py", line 241, in __call__
    return await self.func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/utils.py", line 241, in __call__
    return await self.func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/tenacity/_asyncio.py", line 88, in async_wrapped
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/tenacity/_asyncio.py", line 47, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/tenacity/__init__.py", line 314, in iter
    return fut.result()
           ^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/Applications/anaconda3/lib/python3.11/site-packages/tenacity/_asyncio.py", line 50, in __call__
    result = await fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/llm/azure_openai.py", line 143, in azure_openai_embed
    response = await openai_async_client.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/openai/resources/embeddings.py", line 245, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1748, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1555, in request
    raise self._make_status_error_from_response(err.response) from None
openai.NotFoundError: Error code: 404 - {'error': {'code': 'DeploymentNotFound', 'message': 'The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.'}}

2025-06-16 13:00:07,606 - lightrag - ERROR - Failed to extrat document 1/1: doc_0_c9a01a3705ddd76599eb211929f8dd84.json
2025-06-16 13:00:07,607 - lightrag - INFO - Document processing pipeline completed
2025-06-16 13:00:07,623 - lightrag - ERROR - limit_async: Error in decorated function: Error code: 404 - {'error': {'code': 'DeploymentNotFound', 'message': 'The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.'}}
2025-06-16 13:02:12,499 - lightrag - INFO - Process 77824 drop text_chunks
2025-06-16 13:02:12,499 - lightrag - INFO - Process 77824 drop full_docs
2025-06-16 13:02:12,500 - lightrag - INFO - Process 77824 drop entities(file:/Users/amychan/rag_files/rag_storage/vdb_entities.json)
2025-06-16 13:02:12,500 - lightrag - INFO - Process 77824 drop relationships(file:/Users/amychan/rag_files/rag_storage/vdb_relationships.json)
2025-06-16 13:02:12,501 - lightrag - INFO - Process 77824 drop chunks(file:/Users/amychan/rag_files/rag_storage/vdb_chunks.json)
2025-06-16 13:02:12,501 - lightrag - INFO - Process 77824 drop graph chunk_entity_relation (file:/Users/amychan/rag_files/rag_storage/graph_chunk_entity_relation.graphml)
2025-06-16 13:02:12,501 - lightrag - INFO - Process 77824 drop doc_status
2025-06-16 13:02:12,501 - lightrag - INFO - Successfully dropped JsonKVStorage
2025-06-16 13:02:12,502 - lightrag - INFO - Successfully dropped JsonKVStorage
2025-06-16 13:02:12,502 - lightrag - INFO - Successfully dropped NanoVectorDBStorage
2025-06-16 13:02:12,502 - lightrag - INFO - Successfully dropped NanoVectorDBStorage
2025-06-16 13:02:12,502 - lightrag - INFO - Successfully dropped NanoVectorDBStorage
2025-06-16 13:02:12,502 - lightrag - INFO - Successfully dropped NetworkXStorage
2025-06-16 13:02:12,502 - lightrag - INFO - Successfully dropped JsonDocStatusStorage
2025-06-16 13:02:12,503 - uvicorn.access - INFO - 127.0.0.1:49401 - "DELETE /documents HTTP/1.1" 200
2025-06-16 13:02:31,155 - uvicorn.access - INFO - 127.0.0.1:49418 - "POST /documents/upload HTTP/1.1" 200
2025-06-16 13:02:31,158 - lightrag - INFO - Stored 1 new unique documents
2025-06-16 13:02:31,158 - lightrag - INFO - Successfully fetched and enqueued file: doc_0_c9a01a3705ddd76599eb211929f8dd84.json
2025-06-16 13:02:31,160 - lightrag - INFO - Processing 1 document(s)
2025-06-16 13:02:31,161 - lightrag - INFO - Extracting stage 1/1: doc_0_c9a01a3705ddd76599eb211929f8dd84.json
2025-06-16 13:02:31,161 - lightrag - INFO - Processing d-id: doc-9b5a5c8aba699a1eeb5b5d579da4dd8f
2025-06-16 13:02:32,567 - lightrag - ERROR - limit_async: Error in decorated function: Error code: 404 - {'error': {'code': 'DeploymentNotFound', 'message': 'The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.'}}
2025-06-16 13:02:32,569 - lightrag - ERROR - Traceback (most recent call last):
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/lightrag.py", line 1003, in process_document
    await asyncio.gather(*tasks)
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/kg/nano_vector_db_impl.py", line 109, in upsert
    embeddings_list = await asyncio.gather(*embedding_tasks)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/utils.py", line 585, in wait_func
    return await future
           ^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/utils.py", line 369, in worker
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/utils.py", line 241, in __call__
    return await self.func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/utils.py", line 241, in __call__
    return await self.func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/tenacity/_asyncio.py", line 88, in async_wrapped
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/tenacity/_asyncio.py", line 47, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/tenacity/__init__.py", line 314, in iter
    return fut.result()
           ^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/Applications/anaconda3/lib/python3.11/site-packages/tenacity/_asyncio.py", line 50, in __call__
    result = await fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amychan/rag_test_light/LightRAG/lightrag/llm/azure_openai.py", line 143, in azure_openai_embed
    response = await openai_async_client.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/openai/resources/embeddings.py", line 245, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1748, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Applications/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1555, in request
    raise self._make_status_error_from_response(err.response) from None
openai.NotFoundError: Error code: 404 - {'error': {'code': 'DeploymentNotFound', 'message': 'The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.'}}

2025-06-16 13:02:32,569 - lightrag - ERROR - Failed to extrat document 1/1: doc_0_c9a01a3705ddd76599eb211929f8dd84.json
2025-06-16 13:02:32,571 - lightrag - INFO - Document processing pipeline completed
2025-06-16 13:02:32,619 - lightrag - ERROR - limit_async: Error in decorated function: Error code: 404 - {'error': {'code': 'DeploymentNotFound', 'message': 'The API deployment for this resource does not exist. If you created the deployment within the last 5 minutes, please wait a moment and try again.'}}
2025-06-16 13:06:27,485 - uvicorn.error - INFO - Shutting down
2025-06-16 13:06:27,587 - uvicorn.error - INFO - Waiting for application shutdown.
2025-06-16 13:06:27,589 - uvicorn.error - INFO - Application shutdown complete.
2025-06-16 13:06:27,589 - uvicorn.error - INFO - Finished server process [77824]
